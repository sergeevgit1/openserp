# –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–æ–¥—ã –≤ npm

## –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### 1.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
```bash
cd /Users/dmitrijzaruba/Documents/trae_projects/openserp/n8n-node-openserp
ls -la
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –≤—Å–µ —Ñ–∞–π–ª—ã:
- package.json
- index.ts
- README.md
- LICENSE
- –∏ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã

### 1.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –≤ package.json
```bash
cat package.json | grep version
```
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–µ—Ä—Å–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.0.0)

### 1.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏ –ø–∞–∫–µ—Ç–∞
```bash
cat package.json | grep name
```
–ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: n8n-nodes-openserp

## –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install --no-optional
```

## –®–∞–≥ 3: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
npm run build
```

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `dist/`:
```bash
ls -la dist/
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ñ–∞–π–ª—ã:
- dist/nodes/OpenSERP/OpenSERP.node.js
- dist/credentials/OpenSERPApi/OpenSERPApi.credentials.js
- dist/index.js
- –∏ –¥—Ä—É–≥–∏–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ npm

```bash
npm whoami
```

–ï—Å–ª–∏ –Ω–µ –≤–æ—à–ª–∏:
```bash
npm login
```
- –í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å
- –í–≤–µ–¥–∏—Ç–µ email

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω–∏ –ø–∞–∫–µ—Ç–∞

```bash
npm view n8n-nodes-openserp
```

–ï—Å–ª–∏ –ø–∞–∫–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω - –∏–º—è —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.

## –®–∞–≥ 6: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞

### 6.1 –°—É—Ö–æ–π –ø—Ä–æ–≥–æ–Ω (–ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
```bash
npm pack --dry-run
```

### 6.2 –ü—É–±–ª–∏–∫–∞—Ü–∏—è
```bash
npm publish
```

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:
```bash
npm publish --access public
```

## –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### 7.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
–û—Ç–∫—Ä–æ–π—Ç–µ: https://www.npmjs.com/package/n8n-nodes-openserp

### 7.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ npm
```bash
npm view n8n-nodes-openserp
```

### 7.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```bash
mkdir /tmp/test-install
cd /tmp/test-install
npm init -y
npm install n8n-nodes-openserp
ls node_modules/n8n-nodes-openserp/
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "403 Forbidden - You cannot publish over the existing version"
–†–µ—à–µ–Ω–∏–µ: –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é –≤ package.json
```bash
npm version patch  # 1.0.0 -> 1.0.1
npm publish
```

### –û—à–∏–±–∫–∞: "402 Payment Required"
–†–µ—à–µ–Ω–∏–µ: –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å –ø—É–±–ª–∏—á–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º
```bash
npm publish --access public
```

### –û—à–∏–±–∫–∞: "E401 Unauthorized"
–†–µ—à–µ–Ω–∏–µ: –í–æ–π–¥–∏—Ç–µ –≤ npm
```bash
npm login
npm publish
```

### –û—à–∏–±–∫–∞: "ENOENT: no such file or directory"
–†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –ø—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω
```bash
npm run build
ls -la dist/
```

## –®–∞–≥ 8: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ (–¥–ª—è –±—É–¥—É—â–∏—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π)

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∏–Ω–æ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–∏
npm version minor  # 1.0.0 -> 1.1.0

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ç—á–∞
npm version patch  # 1.0.0 -> 1.0.1

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∂–æ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–∏
npm version major  # 1.0.0 -> 2.0.0

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
npm publish
```

## –®–∞–≥ 9: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–¥—É –≤ n8n:
   ```bash
   npm install n8n-nodes-openserp
   ```

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ n8n

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –Ω–æ–¥—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ n8n

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.github/workflows/publish.yml`:
```yaml
name: Publish to npm

on:
  push:
    tags:
      - 'v*'

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '16'
          registry-url: 'https://registry.npmjs.org'
      - run: npm ci
      - run: npm run build
      - run: npm publish
        env:
          NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
```

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub:
- NPM_TOKEN: –≤–∞—à npm —Ç–æ–∫–µ–Ω

–î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GitHub Actions:
```bash
git tag v1.0.0
git push origin v1.0.0
```

## –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–∞—à–∞ –Ω–æ–¥–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑:
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å n8n (Community Nodes)
- npm (`npm install n8n-nodes-openserp`)
- –ü—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ npmjs.com

–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π! üéâ